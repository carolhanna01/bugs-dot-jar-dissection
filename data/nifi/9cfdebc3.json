{
  "project": "nifi",
  "jira_id": "12383",
  "commit": "9cfdebc3",
  "classification": {
    "singleLine": false
  },
  "patch": "diff --git a/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-cluster/src/main/java/org/apache/nifi/cluster/coordination/http/replication/okhttp/OkHttpReplicationClient.java b/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-cluster/src/main/java/org/apache/nifi/cluster/coordination/http/replication/okhttp/OkHttpReplicationClient.java\nindex 3281fa2bf9..36b2b9d583 100644\n--- a/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-cluster/src/main/java/org/apache/nifi/cluster/coordination/http/replication/okhttp/OkHttpReplicationClient.java\n+++ b/nifi-nar-bundles/nifi-framework-bundle/nifi-framework/nifi-framework-cluster/src/main/java/org/apache/nifi/cluster/coordination/http/replication/okhttp/OkHttpReplicationClient.java\n@@ -291,7 +291,11 @@ public class OkHttpReplicationClient implements HttpReplicationClient {\n \n \n     private boolean isUseGzip(final Map<String, String> headers) {\n-        final String rawAcceptEncoding = headers.get(HttpHeaders.ACCEPT_ENCODING);\n+        String rawAcceptEncoding = headers.get(HttpHeaders.ACCEPT_ENCODING);\n+\n+        if (rawAcceptEncoding == null) {\n+            rawAcceptEncoding = headers.get(HttpHeaders.ACCEPT_ENCODING.toLowerCase());\n+        }\n \n         if (rawAcceptEncoding == null) {\n             return false;\n",
  "files": 1,
  "linesAdd": 5,
  "linesRem": 1,
  "failing_tests": [
    "org.apache.nifi.cluster.coordination.http.replication.okhttp.OkHttpReplicationClientTest.testShouldReadCasInsensitiveAcceptEncoding"
  ],
  "nb_test": 80,
  "nb_failure": 1,
  "nb_error": 0,
  "nb_skipped": 0
}