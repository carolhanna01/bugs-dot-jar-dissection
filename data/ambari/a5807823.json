{
  "project": "ambari",
  "jira_id": "16122",
  "commit": "a5807823",
  "classification": {
    "singleLine": false
  },
  "patch": "diff --git a/ambari-server/src/main/java/org/apache/ambari/server/controller/logging/LoggingRequestHelperFactoryImpl.java b/ambari-server/src/main/java/org/apache/ambari/server/controller/logging/LoggingRequestHelperFactoryImpl.java\nindex f892f04cf4..b7e63654ef 100644\n--- a/ambari-server/src/main/java/org/apache/ambari/server/controller/logging/LoggingRequestHelperFactoryImpl.java\n+++ b/ambari-server/src/main/java/org/apache/ambari/server/controller/logging/LoggingRequestHelperFactoryImpl.java\n@@ -32,13 +32,13 @@ public class LoggingRequestHelperFactoryImpl implements LoggingRequestHelperFact\n \n   private static final Logger LOG = Logger.getLogger(LoggingRequestHelperFactoryImpl.class);\n \n-  private static final String LOGSEARCH_SITE_CONFIG_TYPE_NAME = \"logsearch-site\";\n+  private static final String LOGSEARCH_ENV_CONFIG_TYPE_NAME = \"logsearch-env\";\n \n   private static final String LOGSEARCH_SERVICE_NAME = \"LOGSEARCH\";\n \n   private static final String LOGSEARCH_SERVER_COMPONENT_NAME = \"LOGSEARCH_SERVER\";\n \n-  private static final String LOGSEARCH_UI_PORT_PROPERTY_NAME = \"logsearch.ui.port\";\n+  private static final String LOGSEARCH_UI_PORT_PROPERTY_NAME = \"logsearch_ui_port\";\n \n \n   @Override\n@@ -58,8 +58,8 @@ public class LoggingRequestHelperFactoryImpl implements LoggingRequestHelperFact\n           return null;\n         }\n \n-        Config logSearchSiteConfig =\n-          cluster.getDesiredConfigByType(LOGSEARCH_SITE_CONFIG_TYPE_NAME);\n+        Config logSearchEnvConfig =\n+          cluster.getDesiredConfigByType(LOGSEARCH_ENV_CONFIG_TYPE_NAME);\n \n         List<ServiceComponentHost> listOfMatchingHosts =\n           cluster.getServiceComponentHosts(LOGSEARCH_SERVICE_NAME, LOGSEARCH_SERVER_COMPONENT_NAME);\n@@ -84,7 +84,7 @@ public class LoggingRequestHelperFactoryImpl implements LoggingRequestHelperFact\n \n         final String logSearchHostName = serviceComponentHost.getHostName();\n         final String logSearchPortNumber =\n-          logSearchSiteConfig.getProperties().get(LOGSEARCH_UI_PORT_PROPERTY_NAME);\n+          logSearchEnvConfig.getProperties().get(LOGSEARCH_UI_PORT_PROPERTY_NAME);\n \n         return new LoggingRequestHelperImpl(logSearchHostName, logSearchPortNumber, ambariManagementController.getCredentialStoreService(), cluster);\n       }\ndiff --git a/ambari-server/src/main/java/org/apache/ambari/server/controller/logging/LoggingRequestHelperImpl.java b/ambari-server/src/main/java/org/apache/ambari/server/controller/logging/LoggingRequestHelperImpl.java\nindex 3fac6554f8..c1afce01ab 100644\n--- a/ambari-server/src/main/java/org/apache/ambari/server/controller/logging/LoggingRequestHelperImpl.java\n+++ b/ambari-server/src/main/java/org/apache/ambari/server/controller/logging/LoggingRequestHelperImpl.java\n@@ -56,7 +56,7 @@ public class LoggingRequestHelperImpl implements LoggingRequestHelper {\n \n   private static Logger LOG = Logger.getLogger(LoggingRequestHelperImpl.class);\n \n-  private static final String LOGSEARCH_ADMIN_PROPERTIES_CONFIG_TYPE_NAME = \"logsearch-admin-properties\";\n+  private static final String LOGSEARCH_ADMIN_JSON_CONFIG_TYPE_NAME = \"logsearch-admin-json\";\n \n   private static final String LOGSEARCH_ADMIN_USERNAME_PROPERTY_NAME = \"logsearch_admin_username\";\n \n@@ -153,7 +153,7 @@ public class LoggingRequestHelperImpl implements LoggingRequestHelper {\n \n   private String getLogSearchAdminUser() {\n     Config logSearchAdminConfig =\n-      cluster.getDesiredConfigByType(LOGSEARCH_ADMIN_PROPERTIES_CONFIG_TYPE_NAME);\n+      cluster.getDesiredConfigByType(LOGSEARCH_ADMIN_JSON_CONFIG_TYPE_NAME);\n \n     if (logSearchAdminConfig != null) {\n       return logSearchAdminConfig.getProperties().get(LOGSEARCH_ADMIN_USERNAME_PROPERTY_NAME);\n@@ -164,7 +164,7 @@ public class LoggingRequestHelperImpl implements LoggingRequestHelper {\n \n   private String getLogSearchAdminPassword() {\n     Config logSearchAdminConfig =\n-      cluster.getDesiredConfigByType(LOGSEARCH_ADMIN_PROPERTIES_CONFIG_TYPE_NAME);\n+      cluster.getDesiredConfigByType(LOGSEARCH_ADMIN_JSON_CONFIG_TYPE_NAME);\n \n     if (logSearchAdminConfig != null) {\n       return logSearchAdminConfig.getProperties().get(LOGSEARCH_ADMIN_PASSWORD_PROPERTY_NAME);\n",
  "files": 2,
  "linesAdd": 8,
  "linesRem": 8,
  "failing_tests": [
    "org.apache.ambari.server.controller.logging.LoggingRequestHelperFactoryImplTest.testHelperCreation",
    "org.apache.ambari.server.controller.logging.LoggingRequestHelperFactoryImplTest.testHelperCreationLogSearchServerNotStarted",
    "org.apache.ambari.server.controller.logging.LoggingRequestHelperFactoryImplTest.testHelperCreationWithNoLogSearchServersAvailable",
    "org.apache.ambari.server.controller.logging.LoggingRequestHelperImplTest.testLogFileNameRequestBasic",
    "org.apache.ambari.server.controller.logging.LoggingRequestHelperImplTest.testLogLevelRequestBasic",
    "org.apache.ambari.server.controller.logging.LoggingRequestHelperImplTest.testLogQueryRequestBasic",
    "org.apache.ambari.server.controller.logging.LoggingRequestHelperImplTest.testLogQueryRequestBasicCredentialsNotInConfig",
    "org.apache.ambari.server.controller.ivory.ClusterTest.testTransitionNonReportableHost"
  ],
  "nb_test": 4276,
  "nb_failure": 8,
  "nb_error": 0,
  "nb_skipped": 32
}