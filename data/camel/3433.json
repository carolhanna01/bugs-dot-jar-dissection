{
  "files": 1, 
  "singleLine": false, 
  "nb_error": 1, 
  "failing_tests": [
    "testEmptyHeaderValueIn(org.apache.camel.builder.PredicateBuilderTest)"
  ], 
  "nb_test": 3008, 
  "patch": "diff --git a/camel-core/src/main/java/org/apache/camel/builder/ExpressionBuilder.java b/camel-core/src/main/java/org/apache/camel/builder/ExpressionBuilder.java\nindex 5f73fe3..db029ec 100644\n--- a/camel-core/src/main/java/org/apache/camel/builder/ExpressionBuilder.java\n+++ b/camel-core/src/main/java/org/apache/camel/builder/ExpressionBuilder.java\n@@ -935,12 +935,16 @@ public final class ExpressionBuilder {\n     public static Expression convertToExpression(final Expression expression, final Class type) {\n         return new ExpressionAdapter() {\n             public Object evaluate(Exchange exchange) {\n-                return expression.evaluate(exchange, type);\n+                if (type != null) {\n+                    return expression.evaluate(exchange, type);\n+                } else {\n+                    return expression;\n+                }\n             }\n \n             @Override\n             public String toString() {\n-                return \"\" + expression + \".convertTo(\" + type.getCanonicalName() + \".class)\";\n+                return \"\" + expression;\n             }\n         };\n     }\n@@ -952,12 +956,17 @@ public final class ExpressionBuilder {\n     public static Expression convertToExpression(final Expression expression, final Expression type) {\n         return new ExpressionAdapter() {\n             public Object evaluate(Exchange exchange) {\n-                return expression.evaluate(exchange, type.evaluate(exchange, Object.class).getClass());\n+                Object result = type.evaluate(exchange, Object.class);\n+                if (result != null) {\n+                    return expression.evaluate(exchange, result.getClass());\n+                } else {\n+                    return expression;\n+                }\n             }\n \n             @Override\n             public String toString() {\n-                return \"\" + expression + \".convertToEvaluatedType(\" + type + \")\";\n+                return \"\" + expression;\n             }\n         };\n     }\n", 
  "project": "camel", 
  "linesAdd": 13, 
  "nb_skipped": 0, 
  "fix_commit": "e76d23b0", 
  "nb_failure": 0, 
  "id": "3433", 
  "linesRem": 4
}