{"files": 1, "singleLine": false, "nb_error": 1, "failing_tests": ["testInOnly(org.apache.camel.component.bean.BeanWithHeadersAndBodyInject3Test)"], "nb_test": 2992, "patch": "diff --git a/camel-core/src/main/java/org/apache/camel/builder/ExpressionBuilder.java b/camel-core/src/main/java/org/apache/camel/builder/ExpressionBuilder.java\nindex cdcfa6a..5f73fe3 100644\n--- a/camel-core/src/main/java/org/apache/camel/builder/ExpressionBuilder.java\n+++ b/camel-core/src/main/java/org/apache/camel/builder/ExpressionBuilder.java\n@@ -254,12 +254,18 @@ public final class ExpressionBuilder {\n     /**\n      * Returns an expression for the outbound message headers\n      *\n-     * @return an expression object which will return the headers\n+     * @return an expression object which will return the headers, will be <tt>null</tt> if the\n+     * exchange is not out capable.\n      */\n     public static Expression outHeadersExpression() {\n         return new ExpressionAdapter() {\n             public Object evaluate(Exchange exchange) {\n-                return exchange.getOut().getHeaders();\n+                // only get out headers if the MEP is out capable\n+                if (ExchangeHelper.isOutCapable(exchange)) {\n+                    return exchange.getOut().getHeaders();\n+                } else {\n+                    return null;\n+                }\n             }\n \n             @Override\n", "project": "camel", "linesAdd": 8, "nb_skipped": 0, "fix_commit": "0919a0f6", "nb_failure": 0, "id": "3388", "linesRem": 2}