{
  "files": 1, 
  "singleLine": false, 
  "nb_error": 0, 
  "failing_tests": [
    "polynomial(org.apache.commons.math.ode.nonstiff.AdamsMoultonIntegratorTest)"
  ], 
  "nb_test": 2121, 
  "patch": "diff --git a/src/main/java/org/apache/commons/math/ode/nonstiff/EmbeddedRungeKuttaIntegrator.java b/src/main/java/org/apache/commons/math/ode/nonstiff/EmbeddedRungeKuttaIntegrator.java\nindex 70b2a2b..1bbad3e 100644\n--- a/src/main/java/org/apache/commons/math/ode/nonstiff/EmbeddedRungeKuttaIntegrator.java\n+++ b/src/main/java/org/apache/commons/math/ode/nonstiff/EmbeddedRungeKuttaIntegrator.java\n@@ -17,8 +17,6 @@\n \n package org.apache.commons.math.ode.nonstiff;\n \n-import java.util.Arrays;\n-\n import org.apache.commons.math.ode.DerivativeException;\n import org.apache.commons.math.ode.FirstOrderDifferentialEquations;\n import org.apache.commons.math.ode.IntegratorException;\n@@ -244,13 +242,16 @@ public abstract class EmbeddedRungeKuttaIntegrator\n         }\n \n         if (firstTime) {\n-          final double[] scale;\n-          if (vecAbsoluteTolerance != null) {\n-            scale = vecAbsoluteTolerance;\n-          } else {\n-            scale = new double[y0.length];\n-            Arrays.fill(scale, scalAbsoluteTolerance);\n-          }\n+          final double[] scale = new double[y0.length];\n+          if (vecAbsoluteTolerance == null) {\n+              for (int i = 0; i < scale.length; ++i) {\n+                scale[i] = scalAbsoluteTolerance + scalRelativeTolerance * Math.abs(y[i]);\n+              }\n+            } else {\n+              for (int i = 0; i < scale.length; ++i) {\n+                scale[i] = vecAbsoluteTolerance[i] + vecRelativeTolerance[i] * Math.abs(y[i]);\n+              }\n+            }\n           hNew = initializeStep(equations, forward, getOrder(), scale,\n                                 stepStart, y, yDotK[0], yTmp, yDotK[1]);\n           firstTime = false;\n", 
  "project": "commons-math", 
  "linesAdd": 10, 
  "nb_skipped": 0, 
  "fix_commit": "8dd22390", 
  "nb_failure": 1, 
  "id": "338", 
  "linesRem": 9
}