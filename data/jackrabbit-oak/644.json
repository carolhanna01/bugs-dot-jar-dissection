{"nb_failure": 0, "nb_error": 2, "failing_tests": ["testSetPolicy(org.apache.jackrabbit.oak.security.authorization.AccessControlManagerImplTest)", "testSetPolicyWritesAcContent(org.apache.jackrabbit.oak.security.authorization.AccessControlManagerImplTest)"], "patch": "diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/AccessControlConfigurationImpl.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/AccessControlConfigurationImpl.java\nindex aa7b8d8..7531580 100644\n--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/AccessControlConfigurationImpl.java\n+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/AccessControlConfigurationImpl.java\n@@ -70,7 +70,8 @@ public class AccessControlConfigurationImpl extends SecurityConfiguration.Defaul\n         return new CommitHookProvider() {\n             @Override\n             public CommitHook getCommitHook(String workspaceName) {\n-                return new CompositeHook(new PermissionHook(workspaceName), new VersionablePathHook(workspaceName));\n+                //FIXME return new CompositeHook(new PermissionHook(workspaceName), new VersionablePathHook(workspaceName));\n+                return new CompositeHook(new VersionablePathHook(workspaceName));\n             }\n         };\n     }\ndiff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/security/privilege/PrivilegeDefinitionStore.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/security/privilege/PrivilegeDefinitionStore.java\nindex 6ae510c..2fa44f7 100644\n--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/security/privilege/PrivilegeDefinitionStore.java\n+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/security/privilege/PrivilegeDefinitionStore.java\n@@ -38,6 +38,8 @@ import org.apache.jackrabbit.oak.util.TreeUtil;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n+import static com.google.common.base.Preconditions.checkNotNull;\n+\n /**\n  * Reads and writes privilege definitions from and to the repository content\n  * without applying any validation.\n@@ -110,7 +112,7 @@ public class PrivilegeDefinitionStore implements PrivilegeConstants {\n         }\n         PrivilegeBits bits = PrivilegeBits.getInstance();\n         for (String privilegeName : privilegeNames) {\n-            Tree defTree = privilegesTree.getChild(privilegeName);\n+            Tree defTree = privilegesTree.getChild(checkNotNull(privilegeName));\n             if (defTree != null) {\n                 bits.add(PrivilegeBits.getInstance(defTree));\n             }\n", "nb_test": 649, "nb_skipped": 1, "fix_commit": "55a4f738", "id": "644"}